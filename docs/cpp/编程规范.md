# 编程规范

## 工程组织

![输入图片说明](./imgs/2024-07/1qJOS2LDTH0ybpzg.png){width=500px}





- 基本目录：
  - `include`：项目公共头文件。
  - `src`：项目源文件和私有头文件。
  - `test` 或 `tests`：项目测试源文件。

- 空目录：
  - `bin`：输出的可执行文件。
  - `build`：所有中间文件。
  - `doc` 或 `docs`：项目文档。

- 可选目录：
  - `submodules`：项目子模块。
  - `third_party`（较少使用 deps/external/extern）：依赖或外部库。
  - `data` 或 `extras`：被可执行文件或测试使用的文件。
  - `examples`：展示项目功能的源文件。
  - `utils` 或` tools`, `script`：与项目相关的脚本和工具。
  - `cmake`：CMake子模块（.cmake 文件）。

- 文件说明：
  - `LICENSE`：描述如何使用和分发此项目。
  - `README.md`：用 Markdown 格式编写的项目的一般信息。
  - `CMakeLists.txt`：描述如何编译项目的文件。
  - `Doxyfile`：doxygen 使用的配置文件，用于生成文档。
  - 其他文件如 .gitignore, .clang-format, .clang-tidy 等。


- 选择开源许可：
  - choosealicense.com


- 常见的 C++ 文件扩展名：
  - 头文件：.h, .hh, .hpp, .hxx
  - 头文件实现：.i.h, .i.hpp, -inl.h, .inl.hpp
    - 用于内联函数和模板的接口与实现分离
    - 在头文件中保持实现“内联”
  - 源文件/实现：.c, .cc, .cpp, .cxx
  - 命名约定：
    - .h, .c, .cc：Google 使用
    - .hh, .cc
    - .hpp, .cpp
    - .hxx, .cxx

- 文件命名：
  - 文件应该以其实现的类/命名空间的名称命名。
  - 例如：
    - 类 MyClass: MyClass.hpp, MyClass.i.hpp, MyClass.cpp
    - 命名空间 my_np: MyNP.hpp, MyNP.i.hpp, MyNP.cpp

- 源码组织：
  - 公共头文件放在 include/ 目录。
  - 源文件、私有头文件、头文件实现放在 src/ 目录。
  - 主文件（如果存在）放在 src/ 并命名为 main.cpp。
  - 代码测试，单元测试和功能测试放在 test/，或者单元测试放在被测试组件同一目录下，文件名以 `.test` 后缀，例如 my_file.test.cpp。

![输入图片说明](./imgs/2024-07/jY9iLAZq8pfecZPe.png){width=500px}


- 改进的项目组织：
  - 在 include/ 和 src/ 下添加项目名称的子目录非常有用，特别是当项目作为子模块使用或作为外部库导入时。
  - 包含文件时使用的格式：#include <my_project/public_header.hpp>。

- 头文件和源文件组织：
  - 头文件和源文件（或模块接口和实现文件）放在一起（不分 include/ 和 src/）。
  - 头文件使用尖括号 <> 包含，并包含项目目录前缀，例如 <hello/hello.hpp>。
  - 头文件和源文件扩展名为 .hpp / .cpp（模块接口为 .mpp）。
  - 实现模块单元测试的源文件应放在该模块的文件旁边，并以模块名称加上 .test 二级扩展名命名。
  - 项目的功能/集成测试应放在 tests/ 子目录中。

<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE1NTU4MDk3MjgsMTE0NTkyMjQ0NV19
-->